{
  "schema": "bonsai.v1",
  "exportedAt": "2025-08-28T07:53:50.777Z",
  "activeBranchId": "main",
  "branches": [
    {
      "id": "main",
      "name": "Main",
      "nodes": [
        {
          "id": 1,
          "prompt": "Initial code",
          "code": "\ndef find_in_sorted(arr, x):\n    def binsearch(start, end):\n        if start == end:\n            return -1\n        mid = start + (end - start) // 2\n        if x < arr[mid]:\n            return binsearch(start, mid)\n        elif x > arr[mid]:\n            return binsearch(mid + 1, end)\n        else:\n            return mid\n\n    return binsearch(0, len(arr))\n",
          "parentId": null,
          "children": [],
          "durationMs": 0,
          "tokens": {
            "prompt": 0,
            "completion": 0,
            "total": 0
          },
          "isLeaf": false,
          "activity": "initial"
        },
        {
          "id": 2,
          "prompt": "You are an expert software engineer. You will be given CODE (from the user).\n            First, infer the most likely primary defect or weakness, then FIX it with minimal, targeted changes.\n            - Keep behavior otherwise unchanged.\n            - Keep the public API stable unless strictly needed.\n            - Make the code testable and maintainable.",
          "code": "def find_in_sorted(arr, x):\n    if not arr:\n        return -1\n\n    def binsearch(start, end):\n        if start > end:\n            return -1\n        mid = start + (end - start) // 2\n        if x < arr[mid]:\n            return binsearch(start, mid - 1)\n        elif x > arr[mid]:\n            return binsearch(mid + 1, end)\n        else:\n            return mid\n\n    return binsearch(0, len(arr) - 1)",
          "parentId": 1,
          "children": [],
          "durationMs": 9181,
          "tokens": {
            "prompt": 529,
            "completion": 402,
            "total": 931
          },
          "reasoning": "The original implementation used an exclusive upper bound and a base case of `start == end`, which caused infinite recursion or incorrect indices. The fixed version uses inclusive bounds (`start` to `end`) with a base case of `start > end`. It correctly adjusts the search range when moving left (`mid - 1`) or right (`mid + 1`). Additionally, it handles an empty list by returning `-1` immediately. The public API remains unchanged.",
          "lizard": {
            "filename": "/tmp/bonsai-FraJAz/node-2.py",
            "nloc": 14,
            "token_count": 91,
            "function_count": 2,
            "average_ccn": 3,
            "avg_nloc": 7.5,
            "avg_token_count": 45.5,
            "functions": [
              {
                "name": "find_in_sorted.binsearch",
                "long_name": "find_in_sorted.binsearch( start , end )",
                "nloc": 10,
                "ccn": 4,
                "token_count": 63,
                "parameters": 2,
                "start_line": 5,
                "end_line": 14,
                "filename": "/tmp/bonsai-FraJAz/node-2.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 5,
                "ccn": 2,
                "token_count": 28,
                "parameters": 2,
                "start_line": 1,
                "end_line": 16,
                "filename": "/tmp/bonsai-FraJAz/node-2.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "fix_without_context"
        },
        {
          "id": 4,
          "prompt": "You are an expert software engineer. You will be given CODE (from the user).\n            First, infer the most likely primary defect or weakness, then FIX it with minimal, targeted changes.\n            - Keep behavior otherwise unchanged.\n            - Keep the public API stable unless strictly needed.\n            - Make the code testable and maintainable.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    The function uses an iterative binary search to avoid recursion\n    pitfalls such as infinite loops when the middle index equals the start.\n    \"\"\"\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        if arr[mid] == x:\n            return mid\n        elif arr[mid] < x:\n            lo = mid + 1\n        else:\n            hi = mid - 1\n    return -1",
          "parentId": 1,
          "children": [],
          "durationMs": 9378,
          "tokens": {
            "prompt": 529,
            "completion": 424,
            "total": 953
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-1OZ2IS/node-4.py",
            "nloc": 11,
            "token_count": 67,
            "function_count": 1,
            "average_ccn": 4,
            "avg_nloc": 11,
            "avg_token_count": 66,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 11,
                "ccn": 4,
                "token_count": 66,
                "parameters": 2,
                "start_line": 1,
                "end_line": 16,
                "filename": "/tmp/bonsai-1OZ2IS/node-4.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "fix_without_context"
        },
        {
          "id": 5,
          "prompt": "You are a senior engineer. Your task is to APPEND unit tests to the provided source code, WITHOUT modifying the source. STRICTLY follow these rules:\n            - INCLUDE in the answer the original source code in the prompt. Do NOT change, reorder, format, or delete any line of the original source.\n            - Cover the fixed behavior and edge cases. Prefer small, isolated tests.\n            - Include any necessary test doubles.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    The function uses an iterative binary search to avoid recursion\n    pitfalls such as infinite loops when the middle index equals the start.\n    \"\"\"\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        if arr[mid] == x:\n            return mid\n        elif arr[mid] < x:\n            lo = mid + 1\n        else:\n            hi = mid - 1\n    return -1\n\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_empty_list(self):\n        self.assertEqual(find_in_sorted([], 5), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([3], 3), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([3], 4), -1)\n\n    def test_multiple_elements_found_start(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 1), 0)\n\n    def test_multiple_elements_found_end(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 9), 4)\n\n    def test_multiple_elements_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_multiple_elements_not_found(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 4), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        index = find_in_sorted(arr, 2)\n        self.assertIn(index, [1, 2, 3])\n\n    def test_large_list(self):\n        arr = list(range(0, 1000000, 2))  # even numbers\n        self.assertEqual(find_in_sorted(arr, 999998), 499999)\n        self.assertEqual(find_in_sorted(arr, 1000001), -1)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 4,
          "children": [],
          "durationMs": 14687,
          "tokens": {
            "prompt": 593,
            "completion": 683,
            "total": 1276
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-cvb24m/node-5.py",
            "nloc": 41,
            "token_count": 367,
            "function_count": 10,
            "average_ccn": 1.3,
            "avg_nloc": 3.7,
            "avg_token_count": 33.7,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 11,
                "ccn": 4,
                "token_count": 66,
                "parameters": 2,
                "start_line": 1,
                "end_line": 16,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_empty_list",
                "long_name": "test_empty_list( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 21,
                "end_line": 22,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 24,
                "end_line": 25,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 27,
                "end_line": 28,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_multiple_elements_found_start",
                "long_name": "test_multiple_elements_found_start( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 30,
                "end_line": 32,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_multiple_elements_found_end",
                "long_name": "test_multiple_elements_found_end( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 34,
                "end_line": 36,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_multiple_elements_found_middle",
                "long_name": "test_multiple_elements_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 38,
                "end_line": 40,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_multiple_elements_not_found",
                "long_name": "test_multiple_elements_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 42,
                "end_line": 44,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 46,
                "end_line": 49,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              },
              {
                "name": "test_large_list",
                "long_name": "test_large_list( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 51,
                "end_line": 54,
                "filename": "/tmp/bonsai-cvb24m/node-5.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "gen_tests"
        },
        {
          "id": 6,
          "prompt": "You are a senior engineer. Your task is to APPEND unit tests to the provided source code, WITHOUT modifying the source. STRICTLY follow these rules:\n            - INCLUDE in the answer the original source code in the prompt. Do NOT change, reorder, format, or delete any line of the original source.\n            - Cover the fixed behavior and edge cases. Prefer small, isolated tests.\n            - Include any necessary test doubles.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    The function uses an iterative binary search to avoid recursion\n    pitfalls such as infinite loops when the middle index equals the start.\n    \"\"\"\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        if arr[mid] == x:\n            return mid\n        elif arr[mid] < x:\n            lo = mid + 1\n        else:\n            hi = mid - 1\n    return -1\n\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 10), 0)\n\n    def test_found_last(self):\n        arr = [4, 8, 15, 16, 23]\n        self.assertEqual(find_in_sorted(arr, 23), 4)\n\n    def test_not_found(self):\n        arr = [2, 4, 6, 8]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        arr = []\n        self.assertEqual(find_in_sorted(arr, 1), -1)\n\n    def test_single_element_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 7), 0)\n\n    def test_single_element_not_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 3), -1)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 8000), 4000)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n    def test_negative_numbers(self):\n        arr = [-10, -5, 0, 5, 10]\n        self.assertEqual(find_in_sorted(arr, -5), 1)\n        self.assertEqual(find_in_sorted(arr, 15), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        idx = find_in_sorted(arr, 2)\n        self.assertIn(idx, [1, 2, 3])\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 4,
          "children": [],
          "durationMs": 15692,
          "tokens": {
            "prompt": 593,
            "completion": 725,
            "total": 1318
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-jjSrm5/node-6.py",
            "nloc": 48,
            "token_count": 419,
            "function_count": 11,
            "average_ccn": 1.2727272727272727,
            "avg_nloc": 4,
            "avg_token_count": 35.27272727272727,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 11,
                "ccn": 4,
                "token_count": 66,
                "parameters": 2,
                "start_line": 1,
                "end_line": 16,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 21,
                "end_line": 23,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 25,
                "end_line": 27,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 29,
                "end_line": 31,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 30,
                "parameters": 1,
                "start_line": 33,
                "end_line": 35,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 37,
                "end_line": 39,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 41,
                "end_line": 43,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 24,
                "parameters": 1,
                "start_line": 45,
                "end_line": 47,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 49,
                "end_line": 52,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_negative_numbers",
                "long_name": "test_negative_numbers( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 48,
                "parameters": 1,
                "start_line": 54,
                "end_line": 57,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 59,
                "end_line": 62,
                "filename": "/tmp/bonsai-jjSrm5/node-6.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "gen_tests"
        },
        {
          "id": 8,
          "prompt": "Harden the given CODE with robust error/exception handling.\n            - Add meaningful exceptions and messages.\n            - Avoid blanket catches; keep failures observable.\n            - Do not change external behavior except to handle errors gracefully.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Find the index of element `x` in a sorted list `arr` using binary search.\n    \n    Parameters\n    ----------\n    arr : Sequence[Any]\n        A sorted sequence. Must support indexing and length queries.\n    x : Any\n        The value to search for.\n\n    Returns\n    -------\n    int\n        Index of `x` in `arr`, or -1 if not found.\n\n    Raises\n    ------\n    TypeError\n        If `arr` is not a sequence or does not support indexing.\n    ValueError\n        If the input array is not sorted in non-decreasing order.\n    \"\"\"\n    # Validate that arr is a sequence with length and indexing\n    if not hasattr(arr, \"__len__\") or not hasattr(arr, \"__getitem__\"):\n        raise TypeError(\"`arr` must be a sequence supporting len() and indexing.\")\n    \n    # Empty array: return sentinel -1\n    if len(arr) == 0:\n        return -1\n\n    # Ensure the array is sorted in non-decreasing order.\n    for i in range(1, len(arr)):\n        if arr[i] < arr[i - 1]:\n            raise ValueError(\"Input array must be sorted in non-decreasing order.\")\n\n    def binsearch(start, end):\n        if start > end:\n            return -1\n        mid = start + (end - start) // 2\n        if x < arr[mid]:\n            return binsearch(start, mid - 1)\n        elif x > arr[mid]:\n            return binsearch(mid + 1, end)\n        else:\n            return mid\n\n    return binsearch(0, len(arr) - 1)",
          "parentId": 2,
          "children": [],
          "durationMs": 10269,
          "tokens": {
            "prompt": 522,
            "completion": 462,
            "total": 984
          },
          "reasoning": "The function now validates that the input is a sequence and checks for sorted order, raising clear exceptions. No generic exception catching is used; errors propagate with informative messages while preserving original behavior for valid inputs.",
          "lizard": {
            "filename": "/tmp/bonsai-qt6JnJ/node-8.py",
            "nloc": 19,
            "token_count": 149,
            "function_count": 2,
            "average_ccn": 5,
            "avg_nloc": 10,
            "avg_token_count": 74.5,
            "functions": [
              {
                "name": "find_in_sorted.binsearch",
                "long_name": "find_in_sorted.binsearch( start , end )",
                "nloc": 10,
                "ccn": 4,
                "token_count": 63,
                "parameters": 2,
                "start_line": 37,
                "end_line": 46,
                "filename": "/tmp/bonsai-qt6JnJ/node-8.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 10,
                "ccn": 6,
                "token_count": 86,
                "parameters": 2,
                "start_line": 1,
                "end_line": 48,
                "filename": "/tmp/bonsai-qt6JnJ/node-8.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "exceptions"
        },
        {
          "id": 9,
          "prompt": "You are a senior engineer. Your task is to APPEND unit tests to the provided source code, WITHOUT modifying the source. STRICTLY follow these rules:\n            - INCLUDE in the answer the original source code in the prompt. Do NOT change, reorder, format, or delete any line of the original source.\n            - Cover the fixed behavior and edge cases. Prefer small, isolated tests.\n            - Include any necessary test doubles.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Find the index of element `x` in a sorted list `arr` using binary search.\n    \n    Parameters\n    ----------\n    arr : Sequence[Any]\n        A sorted sequence. Must support indexing and length queries.\n    x : Any\n        The value to search for.\n\n    Returns\n    -------\n    int\n        Index of `x` in `arr`, or -1 if not found.\n\n    Raises\n    ------\n    TypeError\n        If `arr` is not a sequence or does not support indexing.\n    ValueError\n        If the input array is not sorted in non-decreasing order.\n    \"\"\"\n    # Validate that arr is a sequence with length and indexing\n    if not hasattr(arr, \"__len__\") or not hasattr(arr, \"__getitem__\"):\n        raise TypeError(\"`arr` must be a sequence supporting len() and indexing.\")\n    \n    # Empty array: return sentinel -1\n    if len(arr) == 0:\n        return -1\n\n    # Ensure the array is sorted in non-decreasing order.\n    for i in range(1, len(arr)):\n        if arr[i] < arr[i - 1]:\n            raise ValueError(\"Input array must be sorted in non-decreasing order.\")\n\n    def binsearch(start, end):\n        if start > end:\n            return -1\n        mid = start + (end - start) // 2\n        if x < arr[mid]:\n            return binsearch(start, mid - 1)\n        elif x > arr[mid]:\n            return binsearch(mid + 1, end)\n        else:\n            return mid\n\n    return binsearch(0, len(arr) - 1)\n\n\nimport unittest\nfrom collections import deque\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [2, 4, 6]\n        self.assertEqual(find_in_sorted(arr, 2), 0)\n\n    def test_found_last(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 30), 2)\n\n    def test_not_found(self):\n        arr = [1, 4, 6]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        self.assertEqual(find_in_sorted([], 10), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([42], 42), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([42], 43), -1)\n\n    def test_unsorted_array_raises(self):\n        with self.assertRaises(ValueError):\n            find_in_sorted([3, 2, 5], 3)\n\n    def test_non_sequence_raises(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(123, 1)\n\n    def test_deque_input(self):\n        dq = deque([0, 1, 2, 3])\n        self.assertEqual(find_in_sorted(dq, 2), 2)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 5000), 2500)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 8,
          "children": [],
          "durationMs": 21298,
          "tokens": {
            "prompt": 810,
            "completion": 978,
            "total": 1788
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-Kkp1Nw/node-9.py",
            "nloc": 55,
            "token_count": 479,
            "function_count": 13,
            "average_ccn": 1.6153846153846154,
            "avg_nloc": 3.923076923076923,
            "avg_token_count": 34.15384615384615,
            "functions": [
              {
                "name": "find_in_sorted.binsearch",
                "long_name": "find_in_sorted.binsearch( start , end )",
                "nloc": 10,
                "ccn": 4,
                "token_count": 63,
                "parameters": 2,
                "start_line": 37,
                "end_line": 46,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 10,
                "ccn": 6,
                "token_count": 86,
                "parameters": 2,
                "start_line": 1,
                "end_line": 48,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 55,
                "end_line": 57,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 59,
                "end_line": 61,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 63,
                "end_line": 65,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 28,
                "parameters": 1,
                "start_line": 67,
                "end_line": 69,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 71,
                "end_line": 72,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 74,
                "end_line": 75,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 77,
                "end_line": 78,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_unsorted_array_raises",
                "long_name": "test_unsorted_array_raises( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 25,
                "parameters": 1,
                "start_line": 80,
                "end_line": 82,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_non_sequence_raises",
                "long_name": "test_non_sequence_raises( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 84,
                "end_line": 86,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_deque_input",
                "long_name": "test_deque_input( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 88,
                "end_line": 90,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 92,
                "end_line": 95,
                "filename": "/tmp/bonsai-Kkp1Nw/node-9.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "gen_tests"
        },
        {
          "id": 10,
          "prompt": "You are a senior engineer. Your task is to APPEND unit tests to the provided source code, WITHOUT modifying the source. STRICTLY follow these rules:\n            - INCLUDE in the answer the original source code in the prompt. Do NOT change, reorder, format, or delete any line of the original source.\n            - Cover the fixed behavior and edge cases. Prefer small, isolated tests.\n            - Include any necessary test doubles.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Find the index of element `x` in a sorted list `arr` using binary search.\n    \n    Parameters\n    ----------\n    arr : Sequence[Any]\n        A sorted sequence. Must support indexing and length queries.\n    x : Any\n        The value to search for.\n\n    Returns\n    -------\n    int\n        Index of `x` in `arr`, or -1 if not found.\n\n    Raises\n    ------\n    TypeError\n        If `arr` is not a sequence or does not support indexing.\n    ValueError\n        If the input array is not sorted in non-decreasing order.\n    \"\"\"\n    # Validate that arr is a sequence with length and indexing\n    if not hasattr(arr, \"__len__\") or not hasattr(arr, \"__getitem__\"):\n        raise TypeError(\"`arr` must be a sequence supporting len() and indexing.\")\n    \n    # Empty array: return sentinel -1\n    if len(arr) == 0:\n        return -1\n\n    # Ensure the array is sorted in non-decreasing order.\n    for i in range(1, len(arr)):\n        if arr[i] < arr[i - 1]:\n            raise ValueError(\"Input array must be sorted in non-decreasing order.\")\n\n    def binsearch(start, end):\n        if start > end:\n            return -1\n        mid = start + (end - start) // 2\n        if x < arr[mid]:\n            return binsearch(start, mid - 1)\n        elif x > arr[mid]:\n            return binsearch(mid + 1, end)\n        else:\n            return mid\n\n    return binsearch(0, len(arr) - 1)\n\n# Tests\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_empty(self):\n        self.assertEqual(find_in_sorted([], 5), -1)\n\n    def test_found_middle(self):\n        arr = [1,3,5,7,9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_not_found(self):\n        arr = [1,3,5,7]\n        self.assertEqual(find_in_sorted(arr, 4), -1)\n\n    def test_not_sorted(self):\n        arr = [3,2,1]\n        with self.assertRaises(ValueError):\n            find_in_sorted(arr, 2)\n\n    def test_type_error(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(123, 1)\n\n    def test_first_and_last(self):\n        arr = [10,20,30]\n        self.assertEqual(find_in_sorted(arr, 10),0)\n        self.assertEqual(find_in_sorted(arr,30),2)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 8,
          "children": [],
          "durationMs": 24743,
          "tokens": {
            "prompt": 810,
            "completion": 1099,
            "total": 1909
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-pWXob5/node-10.py",
            "nloc": 42,
            "token_count": 343,
            "function_count": 8,
            "average_ccn": 2,
            "avg_nloc": 4.875,
            "avg_token_count": 39.625,
            "functions": [
              {
                "name": "find_in_sorted.binsearch",
                "long_name": "find_in_sorted.binsearch( start , end )",
                "nloc": 10,
                "ccn": 4,
                "token_count": 63,
                "parameters": 2,
                "start_line": 37,
                "end_line": 46,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 10,
                "ccn": 6,
                "token_count": 86,
                "parameters": 2,
                "start_line": 1,
                "end_line": 48,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "test_empty",
                "long_name": "test_empty( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 54,
                "end_line": 55,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 57,
                "end_line": 59,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 30,
                "parameters": 1,
                "start_line": 61,
                "end_line": 63,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "test_not_sorted",
                "long_name": "test_not_sorted( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 28,
                "parameters": 1,
                "start_line": 65,
                "end_line": 68,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "test_type_error",
                "long_name": "test_type_error( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 70,
                "end_line": 72,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              },
              {
                "name": "test_first_and_last",
                "long_name": "test_first_and_last( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 74,
                "end_line": 77,
                "filename": "/tmp/bonsai-pWXob5/node-10.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "gen_tests"
        },
        {
          "id": 11,
          "prompt": "Harden the given CODE with robust error/exception handling.\n            - Add meaningful exceptions and messages.\n            - Avoid blanket catches; keep failures observable.\n            - Do not change external behavior except to handle errors gracefully.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    The function uses an iterative binary search to avoid recursion\n    pitfalls such as infinite loops when the middle index equals the start.\n    \"\"\"\n    if arr is None:\n        raise TypeError(\"arr must not be None\")\n    if not isinstance(arr, list):\n        raise TypeError(f\"Expected arr to be a list, got {type(arr).__name__}\")\n    # Verify that the array is sorted in non-decreasing order\n    for i in range(len(arr) - 1):\n        try:\n            if arr[i] > arr[i + 1]:\n                raise ValueError(\"arr must be sorted in non-decreasing order\")\n        except TypeError as e:\n            raise TypeError(f\"Elements of arr must be comparable: {e}\") from e\n\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        try:\n            if arr[mid] == x:\n                return mid\n            elif arr[mid] < x:\n                lo = mid + 1\n            else:\n                hi = mid - 1\n        except TypeError as e:\n            raise TypeError(f\"Comparison between array element and x failed: {e}\") from e\n    return -1\n\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 10), 0)\n\n    def test_found_last(self):\n        arr = [4, 8, 15, 16, 23]\n        self.assertEqual(find_in_sorted(arr, 23), 4)\n\n    def test_not_found(self):\n        arr = [2, 4, 6, 8]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        arr = []\n        self.assertEqual(find_in_sorted(arr, 1), -1)\n\n    def test_single_element_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 7), 0)\n\n    def test_single_element_not_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 3), -1)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 8000), 4000)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n    def test_negative_numbers(self):\n        arr = [-10, -5, 0, 5, 10]\n        self.assertEqual(find_in_sorted(arr, -5), 1)\n        self.assertEqual(find_in_sorted(arr, 15), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        idx = find_in_sorted(arr, 2)\n        self.assertIn(idx, [1, 2, 3])\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 6,
          "children": [],
          "durationMs": 21892,
          "tokens": {
            "prompt": 981,
            "completion": 981,
            "total": 1962
          },
          "reasoning": "Added explicit type checks for the input list and ensured it is sorted. Comparisons that might fail due to unorderable elements are wrapped in a try/except block that raises a clear TypeError. This preserves original functionality while making errors observable and informative.",
          "lizard": {
            "filename": "/tmp/bonsai-RVMGNq/node-11.py",
            "nloc": 61,
            "token_count": 505,
            "function_count": 11,
            "average_ccn": 1.8181818181818181,
            "avg_nloc": 5.181818181818182,
            "avg_token_count": 43.09090909090909,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 24,
                "ccn": 10,
                "token_count": 152,
                "parameters": 2,
                "start_line": 1,
                "end_line": 31,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 36,
                "end_line": 38,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 40,
                "end_line": 42,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 44,
                "end_line": 46,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 30,
                "parameters": 1,
                "start_line": 48,
                "end_line": 50,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 52,
                "end_line": 54,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 56,
                "end_line": 58,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 24,
                "parameters": 1,
                "start_line": 60,
                "end_line": 62,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 64,
                "end_line": 67,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_negative_numbers",
                "long_name": "test_negative_numbers( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 48,
                "parameters": 1,
                "start_line": 69,
                "end_line": 72,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 74,
                "end_line": 77,
                "filename": "/tmp/bonsai-RVMGNq/node-11.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "exceptions"
        },
        {
          "id": 12,
          "prompt": "Harden the given CODE with robust error/exception handling.\n            - Add meaningful exceptions and messages.\n            - Avoid blanket catches; keep failures observable.\n            - Do not change external behavior except to handle errors gracefully.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    The function uses an iterative binary search to avoid recursion\n    pitfalls such as infinite loops when the middle index equals the start.\n    \"\"\"\n    # Validate input types\n    if not isinstance(arr, list):\n        raise TypeError(f\"arr must be a list, got {type(arr).__name__}\")\n    # Ensure elements are comparable with x\n    try:\n        _ = arr[0] < x if arr else True\n    except Exception as e:\n        raise TypeError(f\"Elements of arr must be comparable with x: {e}\") from e\n\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        try:\n            if arr[mid] == x:\n                return mid\n            elif arr[mid] < x:\n                lo = mid + 1\n            else:\n                hi = mid - 1\n        except Exception as e:\n            raise RuntimeError(f\"Error during comparison at index {mid}: {e}\") from e\n    return -1\n\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 10), 0)\n\n    def test_found_last(self):\n        arr = [4, 8, 15, 16, 23]\n        self.assertEqual(find_in_sorted(arr, 23), 4)\n\n    def test_not_found(self):\n        arr = [2, 4, 6, 8]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        arr = []\n        self.assertEqual(find_in_sorted(arr, 1), -1)\n\n    def test_single_element_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 7), 0)\n\n    def test_single_element_not_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 3), -1)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 8000), 4000)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n    def test_negative_numbers(self):\n        arr = [-10, -5, 0, 5, 10]\n        self.assertEqual(find_in_sorted(arr, -5), 1)\n        self.assertEqual(find_in_sorted(arr, 15), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        idx = find_in_sorted(arr, 2)\n        self.assertIn(idx, [1, 2, 3])\n\n    def test_invalid_arr_type(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(\"not a list\", 1)\n\n    def test_uncomparable_elements(self):\n        arr = [lambda x: x, lambda y: y]\n        with self.assertRaises(TypeError):\n            find_in_sorted(arr, 1)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 6,
          "children": [],
          "durationMs": 20191,
          "tokens": {
            "prompt": 981,
            "completion": 862,
            "total": 1843
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-5MYzJK/node-12.py",
            "nloc": 64,
            "token_count": 529,
            "function_count": 13,
            "average_ccn": 1.5384615384615385,
            "avg_nloc": 4.615384615384615,
            "avg_token_count": 38.15384615384615,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 20,
                "ccn": 8,
                "token_count": 123,
                "parameters": 2,
                "start_line": 1,
                "end_line": 28,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 33,
                "end_line": 35,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 37,
                "end_line": 39,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 41,
                "end_line": 43,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 30,
                "parameters": 1,
                "start_line": 45,
                "end_line": 47,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 49,
                "end_line": 51,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 53,
                "end_line": 55,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 24,
                "parameters": 1,
                "start_line": 57,
                "end_line": 59,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 61,
                "end_line": 64,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_negative_numbers",
                "long_name": "test_negative_numbers( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 48,
                "parameters": 1,
                "start_line": 66,
                "end_line": 69,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 71,
                "end_line": 74,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_invalid_arr_type",
                "long_name": "test_invalid_arr_type( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 76,
                "end_line": 78,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              },
              {
                "name": "test_uncomparable_elements",
                "long_name": "test_uncomparable_elements( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 80,
                "end_line": 83,
                "filename": "/tmp/bonsai-5MYzJK/node-12.py"
              }
            ]
          },
          "isLeaf": false,
          "activity": "exceptions"
        },
        {
          "id": 13,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "from collections.abc import Sequence\nimport unittest\nfrom collections import deque\n\ndef _is_sequence(obj: object) -> bool:\n    \"\"\"Return True if obj behaves like a sequence (supports len and indexing).\"\"\"\n    return hasattr(obj, \"__len__\") and hasattr(obj, \"__getitem__\")\n\ndef _validate_sorted(seq: Sequence) -> None:\n    \"\"\"Ensure seq is sorted in nondecreasing order.\"\"\"\n    for i in range(1, len(seq)):\n        if seq[i] < seq[i - 1]:\n            raise ValueError(\"Input array must be sorted in nondecreasing order.\")\n\ndef _binary_search(seq: Sequence, target, low: int, high: int) -> int:\n    \"\"\"Recursive binary search returning index or -1.\"\"\"\n    if low > high:\n        return -1\n    mid = low + (high - low) // 2\n    if target < seq[mid]:\n        return _binary_search(seq, target, low, mid - 1)\n    if target > seq[mid]:\n        return _binary_search(seq, target, mid + 1, high)\n    return mid\n\ndef find_in_sorted(arr: Sequence, x) -> int:\n    \"\"\"\n    Find the index of element `x` in a sorted sequence `arr`.\n\n    Parameters\n    ----------\n    arr : Sequence[Any]\n        A nonempty, sorted sequence. Must support indexing and length queries.\n    x : Any\n        The value to search for.\n\n    Returns\n    -------\n    int\n        Index of `x` in `arr`, or -1 if not found.\n\n    Raises\n    ------\n    TypeError\n        If `arr` is not a sequence.\n    ValueError\n        If the input array is not sorted in nondecreasing order.\n    \"\"\"\n    if not _is_sequence(arr):\n        raise TypeError(\"`arr` must be a sequence supporting len() and indexing.\")\n\n    if not arr:  # empty sequence\n        return -1\n\n    _validate_sorted(arr)\n    return _binary_search(arr, x, 0, len(arr) - 1)\n\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [2, 4, 6]\n        self.assertEqual(find_in_sorted(arr, 2), 0)\n\n    def test_found_last(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 30), 2)\n\n    def test_not_found(self):\n        arr = [1, 4, 6]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        self.assertEqual(find_in_sorted([], 10), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([42], 42), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([42], 43), -1)\n\n    def test_unsorted_array_raises(self):\n        with self.assertRaises(ValueError):\n            find_in_sorted([3, 2, 5], 3)\n\n    def test_non_sequence_raises(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(123, 1)\n\n    def test_deque_input(self):\n        dq = deque([0, 1, 2, 3])\n        self.assertEqual(find_in_sorted(dq, 2), 2)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 5000), 2500)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 9,
          "children": [],
          "durationMs": 20765,
          "tokens": {
            "prompt": 1184,
            "completion": 916,
            "total": 2100
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-dA9ut2/node-13.py",
            "nloc": 84,
            "token_count": 538,
            "function_count": 15,
            "average_ccn": 1.5333333333333334,
            "avg_nloc": 5.2,
            "avg_token_count": 32.86666666666667,
            "functions": [
              {
                "name": "_is_sequence",
                "long_name": "_is_sequence( obj : object )",
                "nloc": 3,
                "ccn": 2,
                "token_count": 24,
                "parameters": 1,
                "start_line": 5,
                "end_line": 7,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "_validate_sorted",
                "long_name": "_validate_sorted( seq : Sequence )",
                "nloc": 5,
                "ccn": 3,
                "token_count": 41,
                "parameters": 1,
                "start_line": 9,
                "end_line": 13,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "_binary_search",
                "long_name": "_binary_search( seq : Sequence , target , low : int , high : int )",
                "nloc": 10,
                "ccn": 4,
                "token_count": 82,
                "parameters": 4,
                "start_line": 15,
                "end_line": 24,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr : Sequence , x )",
                "nloc": 29,
                "ccn": 3,
                "token_count": 51,
                "parameters": 2,
                "start_line": 26,
                "end_line": 56,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 60,
                "end_line": 62,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 64,
                "end_line": 66,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 68,
                "end_line": 70,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 28,
                "parameters": 1,
                "start_line": 72,
                "end_line": 74,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 76,
                "end_line": 77,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 79,
                "end_line": 80,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 82,
                "end_line": 83,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_unsorted_array_raises",
                "long_name": "test_unsorted_array_raises( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 25,
                "parameters": 1,
                "start_line": 85,
                "end_line": 87,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_non_sequence_raises",
                "long_name": "test_non_sequence_raises( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 89,
                "end_line": 91,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_deque_input",
                "long_name": "test_deque_input( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 93,
                "end_line": 95,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 97,
                "end_line": 100,
                "filename": "/tmp/bonsai-dA9ut2/node-13.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        },
        {
          "id": 14,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "from collections.abc import Sequence\nimport unittest\nfrom collections import deque\n\ndef find_in_sorted(arr: Sequence, x):\n    \"\"\"Return the index of *x* in a sorted sequence *arr*, or -1 if not present.\n\n    Parameters\n    ----------\n    arr : Sequence[Any]\n        A sorted sequence that supports ``len`` and indexing.\n    x : Any\n        Value to search for.\n\n    Returns\n    -------\n    int\n        Index of *x* in *arr*, or ``-1`` if the value is absent.\n\n    Raises\n    ------\n    TypeError\n        If *arr* does not support ``len`` and indexing.\n    ValueError\n        If *arr* is not sorted in nondecreasing order.\n    \"\"\"\n    _validate_sequence(arr)\n    if len(arr) == 0:\n        return -1\n    _ensure_sorted(arr)\n\n    left, right = 0, len(arr) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if arr[mid] == x:\n            return mid\n        elif arr[mid] < x:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1\n\n\ndef _validate_sequence(seq):\n    \"\"\"Ensure *seq* behaves like a sequence (has ``len`` and indexing).\"\"\"\n    if not hasattr(seq, \"__len__\") or not hasattr(seq, \"__getitem__\"):\n        raise TypeError(\n            \"`arr` must be a sequence supporting len() and indexing.\"\n        )\n\n\ndef _ensure_sorted(seq):\n    \"\"\"Raise ``ValueError`` if *seq* is not sorted in nondecreasing order.\"\"\"\n    for i in range(1, len(seq)):\n        if seq[i] < seq[i - 1]:\n            raise ValueError(\"Input array must be sorted in nondecreasing order.\")\n\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [2, 4, 6]\n        self.assertEqual(find_in_sorted(arr, 2), 0)\n\n    def test_found_last(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 30), 2)\n\n    def test_not_found(self):\n        arr = [1, 4, 6]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        self.assertEqual(find_in_sorted([], 10), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([42], 42), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([42], 43), -1)\n\n    def test_unsorted_array_raises(self):\n        with self.assertRaises(ValueError):\n            find_in_sorted([3, 2, 5], 3)\n\n    def test_non_sequence_raises(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(123, 1)\n\n    def test_deque_input(self):\n        dq = deque([0, 1, 2, 3])\n        self.assertEqual(find_in_sorted(dq, 2), 2)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 5000), 2500)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 9,
          "children": [],
          "durationMs": 22084,
          "tokens": {
            "prompt": 1184,
            "completion": 957,
            "total": 2141
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-KXz5DP/node-14.py",
            "nloc": 61,
            "token_count": 491,
            "function_count": 14,
            "average_ccn": 1.5714285714285714,
            "avg_nloc": 3.9285714285714284,
            "avg_token_count": 31.928571428571427,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr : Sequence , x )",
                "nloc": 15,
                "ccn": 5,
                "token_count": 87,
                "parameters": 2,
                "start_line": 5,
                "end_line": 41,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "_validate_sequence",
                "long_name": "_validate_sequence( seq )",
                "nloc": 5,
                "ccn": 3,
                "token_count": 28,
                "parameters": 1,
                "start_line": 44,
                "end_line": 49,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "_ensure_sorted",
                "long_name": "_ensure_sorted( seq )",
                "nloc": 4,
                "ccn": 3,
                "token_count": 37,
                "parameters": 1,
                "start_line": 52,
                "end_line": 56,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 60,
                "end_line": 62,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 64,
                "end_line": 66,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 68,
                "end_line": 70,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 28,
                "parameters": 1,
                "start_line": 72,
                "end_line": 74,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 76,
                "end_line": 77,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 79,
                "end_line": 80,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 82,
                "end_line": 83,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_unsorted_array_raises",
                "long_name": "test_unsorted_array_raises( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 25,
                "parameters": 1,
                "start_line": 85,
                "end_line": 87,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_non_sequence_raises",
                "long_name": "test_non_sequence_raises( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 89,
                "end_line": 91,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_deque_input",
                "long_name": "test_deque_input( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 93,
                "end_line": 95,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 97,
                "end_line": 100,
                "filename": "/tmp/bonsai-KXz5DP/node-14.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        },
        {
          "id": 15,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "def _validate_inputs(arr, x):\n    \"\"\"Ensure `arr` is a list and elements are comparable with `x`.\"\"\"\n    if not isinstance(arr, list):\n        raise TypeError(f\"arr must be a list, got {type(arr).__name__}\")\n    if arr:\n        try:\n            _ = arr[0] < x\n        except Exception as e:\n            raise TypeError(f\"Elements of arr must be comparable with x: {e}\") from e\n\n\ndef _compare(a, b):\n    \"\"\"Compare two elements with error handling.\"\"\"\n    try:\n        if a == b:\n            return 0\n        return -1 if a < b else 1\n    except Exception as e:\n        raise RuntimeError(f\"Comparison error: {e}\") from e\n\n\ndef find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    Uses an iterative binary search. Input validation is performed\n    before the search to provide clear error messages.\n    \"\"\"\n    _validate_inputs(arr, x)\n\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        cmp_result = _compare(arr[mid], x)\n        if cmp_result == 0:\n            return mid\n        elif cmp_result < 0:\n            lo = mid + 1\n        else:\n            hi = mid - 1\n    return -1\n\n\n# ---------- Unit tests ----------\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 10), 0)\n\n    def test_found_last(self):\n        arr = [4, 8, 15, 16, 23]\n        self.assertEqual(find_in_sorted(arr, 23), 4)\n\n    def test_not_found(self):\n        arr = [2, 4, 6, 8]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        arr = []\n        self.assertEqual(find_in_sorted(arr, 1), -1)\n\n    def test_single_element_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 7), 0)\n\n    def test_single_element_not_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 3), -1)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))\n        self.assertEqual(find_in_sorted(arr, 8000), 4000)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n    def test_negative_numbers(self):\n        arr = [-10, -5, 0, 5, 10]\n        self.assertEqual(find_in_sorted(arr, -5), 1)\n        self.assertEqual(find_in_sorted(arr, 15), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        idx = find_in_sorted(arr, 2)\n        self.assertIn(idx, [1, 2, 3])\n\n    def test_invalid_arr_type(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(\"not a list\", 1)\n\n    def test_uncomparable_elements(self):\n        arr = [lambda x: x, lambda y: y]\n        with self.assertRaises(TypeError):\n            find_in_sorted(arr, 1)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 12,
          "children": [],
          "durationMs": 20764,
          "tokens": {
            "prompt": 1175,
            "completion": 924,
            "total": 2099
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-IZaIdE/node-15.py",
            "nloc": 72,
            "token_count": 573,
            "function_count": 15,
            "average_ccn": 1.6,
            "avg_nloc": 4.533333333333333,
            "avg_token_count": 35.86666666666667,
            "functions": [
              {
                "name": "_validate_inputs",
                "long_name": "_validate_inputs( arr , x )",
                "nloc": 8,
                "ccn": 4,
                "token_count": 49,
                "parameters": 2,
                "start_line": 1,
                "end_line": 9,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "_compare",
                "long_name": "_compare( a , b )",
                "nloc": 7,
                "ccn": 4,
                "token_count": 39,
                "parameters": 2,
                "start_line": 12,
                "end_line": 19,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 13,
                "ccn": 4,
                "token_count": 77,
                "parameters": 2,
                "start_line": 22,
                "end_line": 40,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 47,
                "end_line": 49,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 51,
                "end_line": 53,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 55,
                "end_line": 57,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 30,
                "parameters": 1,
                "start_line": 59,
                "end_line": 61,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 63,
                "end_line": 65,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 67,
                "end_line": 69,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 24,
                "parameters": 1,
                "start_line": 71,
                "end_line": 73,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 75,
                "end_line": 78,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_negative_numbers",
                "long_name": "test_negative_numbers( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 48,
                "parameters": 1,
                "start_line": 80,
                "end_line": 83,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 85,
                "end_line": 88,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_invalid_arr_type",
                "long_name": "test_invalid_arr_type( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 90,
                "end_line": 92,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              },
              {
                "name": "test_uncomparable_elements",
                "long_name": "test_uncomparable_elements( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 94,
                "end_line": 97,
                "filename": "/tmp/bonsai-IZaIdE/node-15.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        },
        {
          "id": 16,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "def find_in_sorted(arr, x):\n    \"\"\"Return the index of `x` in a sorted list `arr`, or -1 if not present.\n\n    The function uses an iterative binary search.  Input validation\n    guarantees that the public API behaves consistently.\n    \"\"\"\n    _validate_input(arr, x)\n\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        if arr[mid] == x:\n            return mid\n        if arr[mid] < x:\n            lo = mid + 1\n        else:\n            hi = mid - 1\n    return -1\n\n\ndef _validate_input(arr, x):\n    \"\"\"Validate the arguments for :func:`find_in_sorted`.\"\"\"\n    if not isinstance(arr, list):\n        raise TypeError(f\"arr must be a list, got {type(arr).__name__}\")\n\n    # Ensure elements are comparable with `x`.  The check is performed\n    # lazily to avoid unnecessary work for empty lists.\n    if arr:\n        try:\n            _ = arr[0] < x\n        except Exception as e:\n            raise TypeError(\n                f\"Elements of arr must be comparable with x: {e}\"\n            ) from e\n\n\n# --------------------------------------------------------------------------- #\n# Unit tests\nimport unittest\n\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        self.assertEqual(find_in_sorted([1, 3, 5, 7, 9], 5), 2)\n\n    def test_found_first(self):\n        self.assertEqual(find_in_sorted([10, 20, 30], 10), 0)\n\n    def test_found_last(self):\n        self.assertEqual(find_in_sorted([4, 8, 15, 16, 23], 23), 4)\n\n    def test_not_found(self):\n        self.assertEqual(find_in_sorted([2, 4, 6, 8], 5), -1)\n\n    def test_empty_array(self):\n        self.assertEqual(find_in_sorted([], 1), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([7], 7), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([7], 3), -1)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))\n        self.assertEqual(find_in_sorted(arr, 8000), 4000)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n    def test_negative_numbers(self):\n        arr = [-10, -5, 0, 5, 10]\n        self.assertEqual(find_in_sorted(arr, -5), 1)\n        self.assertEqual(find_in_sorted(arr, 15), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        idx = find_in_sorted(arr, 2)\n        self.assertIn(idx, [1, 2, 3])\n\n    def test_invalid_arr_type(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(\"not a list\", 1)\n\n    def test_uncomparable_elements(self):\n        arr = [lambda x: x, lambda y: y]\n        with self.assertRaises(TypeError):\n            find_in_sorted(arr, 1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 12,
          "children": [],
          "durationMs": 18713,
          "tokens": {
            "prompt": 1175,
            "completion": 810,
            "total": 1985
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-vz6okD/node-16.py",
            "nloc": 59,
            "token_count": 507,
            "function_count": 14,
            "average_ccn": 1.4285714285714286,
            "avg_nloc": 3.9285714285714284,
            "avg_token_count": 33.785714285714285,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 12,
                "ccn": 4,
                "token_count": 72,
                "parameters": 2,
                "start_line": 1,
                "end_line": 18,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "_validate_input",
                "long_name": "_validate_input( arr , x )",
                "nloc": 10,
                "ccn": 4,
                "token_count": 49,
                "parameters": 2,
                "start_line": 21,
                "end_line": 34,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 28,
                "parameters": 1,
                "start_line": 43,
                "end_line": 44,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 24,
                "parameters": 1,
                "start_line": 46,
                "end_line": 47,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 28,
                "parameters": 1,
                "start_line": 49,
                "end_line": 50,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 52,
                "end_line": 53,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 55,
                "end_line": 56,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 58,
                "end_line": 59,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 61,
                "end_line": 62,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 64,
                "end_line": 67,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_negative_numbers",
                "long_name": "test_negative_numbers( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 48,
                "parameters": 1,
                "start_line": 69,
                "end_line": 72,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 74,
                "end_line": 77,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_invalid_arr_type",
                "long_name": "test_invalid_arr_type( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 79,
                "end_line": 81,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              },
              {
                "name": "test_uncomparable_elements",
                "long_name": "test_uncomparable_elements( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 83,
                "end_line": 86,
                "filename": "/tmp/bonsai-vz6okD/node-16.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        },
        {
          "id": 17,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "def _validate_input(arr, x):\n    \"\"\"Validate that `arr` is a list and its elements are comparable with `x`.\"\"\"\n    if not isinstance(arr, list):\n        raise TypeError(f\"arr must be a list, got {type(arr).__name__}\")\n    try:\n        _ = arr[0] < x if arr else True\n    except Exception as e:\n        raise TypeError(f\"Elements of arr must be comparable with x: {e}\") from e\n\n\ndef _compare(a, b):\n    \"\"\"Wrapper for comparison that raises a detailed RuntimeError on failure.\"\"\"\n    try:\n        return a < b\n    except Exception as e:\n        raise RuntimeError(f\"Error during comparison: {e}\") from e\n\n\ndef find_in_sorted(arr, x):\n    \"\"\"\n    Return the index of `x` in a sorted list `arr`, or -1 if not present.\n    Uses an iterative binary search to avoid recursion pitfalls.\n    \"\"\"\n    _validate_input(arr, x)\n\n    lo, hi = 0, len(arr) - 1\n    while lo <= hi:\n        mid = (lo + hi) // 2\n        if arr[mid] == x:\n            return mid\n        elif _compare(arr[mid], x):\n            lo = mid + 1\n        else:\n            hi = mid - 1\n    return -1\n\n\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_found_first(self):\n        arr = [10, 20, 30]\n        self.assertEqual(find_in_sorted(arr, 10), 0)\n\n    def test_found_last(self):\n        arr = [4, 8, 15, 16, 23]\n        self.assertEqual(find_in_sorted(arr, 23), 4)\n\n    def test_not_found(self):\n        arr = [2, 4, 6, 8]\n        self.assertEqual(find_in_sorted(arr, 5), -1)\n\n    def test_empty_array(self):\n        arr = []\n        self.assertEqual(find_in_sorted(arr, 1), -1)\n\n    def test_single_element_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 7), 0)\n\n    def test_single_element_not_found(self):\n        arr = [7]\n        self.assertEqual(find_in_sorted(arr, 3), -1)\n\n    def test_large_array(self):\n        arr = list(range(0, 10000, 2))  # even numbers up to 9998\n        self.assertEqual(find_in_sorted(arr, 8000), 4000)\n        self.assertEqual(find_in_sorted(arr, 9999), -1)\n\n    def test_negative_numbers(self):\n        arr = [-10, -5, 0, 5, 10]\n        self.assertEqual(find_in_sorted(arr, -5), 1)\n        self.assertEqual(find_in_sorted(arr, 15), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        idx = find_in_sorted(arr, 2)\n        self.assertIn(idx, [1, 2, 3])\n\n    def test_invalid_arr_type(self):\n        with self.assertRaises(TypeError):\n            find_in_sorted(\"not a list\", 1)\n\n    def test_uncomparable_elements(self):\n        arr = [lambda x: x, lambda y: y]\n        with self.assertRaises(TypeError):\n            find_in_sorted(arr, 1)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 12,
          "children": [],
          "durationMs": 20196,
          "tokens": {
            "prompt": 1175,
            "completion": 880,
            "total": 2055
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-8l4FRG/node-17.py",
            "nloc": 68,
            "token_count": 560,
            "function_count": 15,
            "average_ccn": 1.4666666666666666,
            "avg_nloc": 4.266666666666667,
            "avg_token_count": 35,
            "functions": [
              {
                "name": "_validate_input",
                "long_name": "_validate_input( arr , x )",
                "nloc": 7,
                "ccn": 4,
                "token_count": 50,
                "parameters": 2,
                "start_line": 1,
                "end_line": 8,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "_compare",
                "long_name": "_compare( a , b )",
                "nloc": 5,
                "ccn": 2,
                "token_count": 27,
                "parameters": 2,
                "start_line": 11,
                "end_line": 16,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr , x )",
                "nloc": 12,
                "ccn": 4,
                "token_count": 75,
                "parameters": 2,
                "start_line": 19,
                "end_line": 35,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_found_middle",
                "long_name": "test_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 41,
                "end_line": 43,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_found_first",
                "long_name": "test_found_first( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 27,
                "parameters": 1,
                "start_line": 45,
                "end_line": 47,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_found_last",
                "long_name": "test_found_last( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 49,
                "end_line": 51,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_not_found",
                "long_name": "test_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 30,
                "parameters": 1,
                "start_line": 53,
                "end_line": 55,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_empty_array",
                "long_name": "test_empty_array( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 57,
                "end_line": 59,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 23,
                "parameters": 1,
                "start_line": 61,
                "end_line": 63,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 24,
                "parameters": 1,
                "start_line": 65,
                "end_line": 67,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_large_array",
                "long_name": "test_large_array( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 69,
                "end_line": 72,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_negative_numbers",
                "long_name": "test_negative_numbers( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 48,
                "parameters": 1,
                "start_line": 74,
                "end_line": 77,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 79,
                "end_line": 82,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_invalid_arr_type",
                "long_name": "test_invalid_arr_type( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 19,
                "parameters": 1,
                "start_line": 84,
                "end_line": 86,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              },
              {
                "name": "test_uncomparable_elements",
                "long_name": "test_uncomparable_elements( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 88,
                "end_line": 91,
                "filename": "/tmp/bonsai-8l4FRG/node-17.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        },
        {
          "id": 18,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "from typing import List, Optional\nimport unittest\n\ndef binary_search(arr: List[int], target: int) -> int:\n    \"\"\"Iterative binary search returning the index of `target` or -1.\"\"\"\n    low, high = 0, len(arr) - 1\n    while low <= high:\n        mid = (low + high) // 2\n        if arr[mid] == target:\n            return mid\n        if arr[mid] < target:\n            low = mid + 1\n        else:\n            high = mid - 1\n    return -1\n\ndef find_in_sorted(arr: List[int], x: int) -> int:\n    \"\"\"Return the index of `x` in a sorted list `arr`, or -1 if not found.\"\"\"\n    return binary_search(arr, x)\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_empty_list(self):\n        self.assertEqual(find_in_sorted([], 5), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([3], 3), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([3], 4), -1)\n\n    def test_multiple_elements_found_start(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 1), 0)\n\n    def test_multiple_elements_found_end(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 9), 4)\n\n    def test_multiple_elements_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_multiple_elements_not_found(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 4), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        index = find_in_sorted(arr, 2)\n        self.assertIn(index, [1, 2, 3])\n\n    def test_large_list(self):\n        arr = list(range(0, 1000000, 2))  # even numbers\n        self.assertEqual(find_in_sorted(arr, 999998), 499999)\n        self.assertEqual(find_in_sorted(arr, 1000001), -1)\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 5,
          "children": [],
          "durationMs": 14996,
          "tokens": {
            "prompt": 935,
            "completion": 670,
            "total": 1605
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-8milG7/node-18.py",
            "nloc": 46,
            "token_count": 407,
            "function_count": 11,
            "average_ccn": 1.2727272727272727,
            "avg_nloc": 3.727272727272727,
            "avg_token_count": 33.63636363636363,
            "functions": [
              {
                "name": "binary_search",
                "long_name": "binary_search( arr : List [ int ] , target : int )",
                "nloc": 12,
                "ccn": 4,
                "token_count": 75,
                "parameters": 2,
                "start_line": 4,
                "end_line": 15,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr : List [ int ] , x : int )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 24,
                "parameters": 2,
                "start_line": 17,
                "end_line": 19,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_empty_list",
                "long_name": "test_empty_list( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 22,
                "end_line": 23,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 25,
                "end_line": 26,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 28,
                "end_line": 29,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_multiple_elements_found_start",
                "long_name": "test_multiple_elements_found_start( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 31,
                "end_line": 33,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_multiple_elements_found_end",
                "long_name": "test_multiple_elements_found_end( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 35,
                "end_line": 37,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_multiple_elements_found_middle",
                "long_name": "test_multiple_elements_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 39,
                "end_line": 41,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_multiple_elements_not_found",
                "long_name": "test_multiple_elements_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 43,
                "end_line": 45,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 47,
                "end_line": 50,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              },
              {
                "name": "test_large_list",
                "long_name": "test_large_list( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 52,
                "end_line": 55,
                "filename": "/tmp/bonsai-8milG7/node-18.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        },
        {
          "id": 19,
          "prompt": "Refactor the given CODE to improve readability, maintainability, and structure WITHOUT changing behavior.\n            - Apply small, safe refactorings (naming, decomposition, DRY, cohesion, comments where useful).\n            - Do not change external behavior or public API.",
          "code": "def find_in_sorted(arr: list[int], x: int) -> int:\n    \"\"\"\n    Perform an iterative binary search on a sorted list `arr` to locate\n    the value `x`.\n\n    Parameters\n    ----------\n    arr : list[int]\n        Sorted list of integers.\n    x : int\n        Target value to search for.\n\n    Returns\n    -------\n    int\n        Index of `x` in `arr`, or -1 if not found.\n    \"\"\"\n    low, high = 0, len(arr) - 1\n    while low <= high:\n        mid = (low + high) // 2\n        if arr[mid] == x:\n            return mid\n        if arr[mid] < x:\n            low = mid + 1\n        else:\n            high = mid - 1\n    return -1\n\n\nimport unittest\n\nclass TestFindInSorted(unittest.TestCase):\n    def test_empty_list(self):\n        self.assertEqual(find_in_sorted([], 5), -1)\n\n    def test_single_element_found(self):\n        self.assertEqual(find_in_sorted([3], 3), 0)\n\n    def test_single_element_not_found(self):\n        self.assertEqual(find_in_sorted([3], 4), -1)\n\n    def test_multiple_elements_found_start(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 1), 0)\n\n    def test_multiple_elements_found_end(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 9), 4)\n\n    def test_multiple_elements_found_middle(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 5), 2)\n\n    def test_multiple_elements_not_found(self):\n        arr = [1, 3, 5, 7, 9]\n        self.assertEqual(find_in_sorted(arr, 4), -1)\n\n    def test_duplicates(self):\n        arr = [1, 2, 2, 2, 3]\n        index = find_in_sorted(arr, 2)\n        self.assertIn(index, [1, 2, 3])\n\n    def test_large_list(self):\n        arr = list(range(0, 1000000, 2))  # even numbers\n        self.assertEqual(find_in_sorted(arr, 999998), 499999)\n        self.assertEqual(find_in_sorted(arr, 1000001), -1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()",
          "parentId": 5,
          "children": [],
          "durationMs": 14987,
          "tokens": {
            "prompt": 935,
            "completion": 672,
            "total": 1607
          },
          "reasoning": "(no reasoning provided)",
          "lizard": {
            "filename": "/tmp/bonsai-5kpwwz/node-19.py",
            "nloc": 57,
            "token_count": 376,
            "function_count": 10,
            "average_ccn": 1.3,
            "avg_nloc": 5.3,
            "avg_token_count": 34.6,
            "functions": [
              {
                "name": "find_in_sorted",
                "long_name": "find_in_sorted( arr : list [ int ] , x : int )",
                "nloc": 27,
                "ccn": 4,
                "token_count": 75,
                "parameters": 2,
                "start_line": 1,
                "end_line": 27,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_empty_list",
                "long_name": "test_empty_list( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 33,
                "end_line": 34,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_single_element_found",
                "long_name": "test_single_element_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 20,
                "parameters": 1,
                "start_line": 36,
                "end_line": 37,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_single_element_not_found",
                "long_name": "test_single_element_not_found( self )",
                "nloc": 2,
                "ccn": 1,
                "token_count": 21,
                "parameters": 1,
                "start_line": 39,
                "end_line": 40,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_multiple_elements_found_start",
                "long_name": "test_multiple_elements_found_start( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 42,
                "end_line": 44,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_multiple_elements_found_end",
                "long_name": "test_multiple_elements_found_end( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 46,
                "end_line": 48,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_multiple_elements_found_middle",
                "long_name": "test_multiple_elements_found_middle( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 31,
                "parameters": 1,
                "start_line": 50,
                "end_line": 52,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_multiple_elements_not_found",
                "long_name": "test_multiple_elements_not_found( self )",
                "nloc": 3,
                "ccn": 1,
                "token_count": 32,
                "parameters": 1,
                "start_line": 54,
                "end_line": 56,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_duplicates",
                "long_name": "test_duplicates( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 40,
                "parameters": 1,
                "start_line": 58,
                "end_line": 61,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              },
              {
                "name": "test_large_list",
                "long_name": "test_large_list( self )",
                "nloc": 4,
                "ccn": 1,
                "token_count": 45,
                "parameters": 1,
                "start_line": 63,
                "end_line": 66,
                "filename": "/tmp/bonsai-5kpwwz/node-19.py"
              }
            ]
          },
          "isLeaf": true,
          "activity": "refactor"
        }
      ]
    }
  ]
}